# Encode Entities

Fast and simple Map and RegExp based HTML entities encoder. In order to overcome different methods of possible XSS attacks, it by default encodes the following characters: **<**, **>**, **"**, **'**, **&**, **=**, `**,** **!**, **@**, **\$**, **%**, **(**, **)**, **+**, **{**, **}**, **[**, **]**.<br>_You can however remove any of these rules and/or add your own._

> Uses the [MappedReplacer](https://www.npmjs.com/package/mapped-replacer) package.

<br>

### Table of Contents

<!--generated by TOC-->

- [Install](#install)
- [API](#api)
  - [resetRules&#40;&#41;](#resetrules-void)
  - [addRule&#40;&#41;](#addrulekey-string-value-string-boolean)
  - [addRules&#40;&#41;](#addrulesrules-object-boolean)
  - [removeRule&#40;&#41;](#removerulekey-string-boolean)
  - [rulesCount&#40;&#41;](#rulescount-number)
  - [encode&#40;&#41;](#encode)
- [Test](#test)
- [Benchmark](#benchmark)
  <!--/generated by TOC-->

<br>

## Install

```javascript
npm i encode-entities
```

<br>

## API

### resetRules(): void

_Resets the rules to the default ones._

```javascript
const Encoder = require('encode-entities')

const encoder = new Encoder()

encoder.addRule('<', '😀')
encoder.addRule('>', '😂')
encoder.resetRules()

console.log(encoder.encode('<strong>')) // outputs '&#60;strong&#62;'
```

<br>

### addRule(key: string, value: string): boolean

_Adds a new rule or updates the existing rule for entities encoding. Returns true if the rule was added successfully or false if not._

```javascript
const Encoder = require('encode-entities')

const encoder = new Encoder()

encoder.addRule('→', '&#8594;')
console.log(encoder.encode('<a href="#">→</a>')) // outputs '&#60;a href&#61;&#34;#&#34;&#62;&#8594;&#60;/a&#62;'
```

<br>

### addRules(rules: Object[]): boolean

_Adds an array of rules or updates the existing rules for entity encoding._<br>
_Passed objects are simple key-value objects, i.e. **{ '<': '\&#60;' }**_<br>
_Returns true if the rules were added successfully or false if not._

```javascript
const Encoder = require('encode-entities')

const encoder = new Encoder()

encoder.addRules({
  '𝕋': '&#120139;',
  '≈': '&#8776;',
  '𝔱': '&#120113;',
})

console.log(encoder.encode('<span>𝕋 ≈ 𝔱</span>')) // outputs '&#60;span&#62;&#120139; &#8776; &#120113;&#60;/span&#62;'
```

<br>

### removeRule(key: string): boolean

_Removes the rule that matches the provided key._
_Returns true if the rule was removed successfully or false if not._

```javascript
const Encoder = require('encode-entities')

const encoder = new Encoder()

encoder.addRules({
  '𝕋': '&#120139;',
  '≈': '&#8776;',
  '𝔱': '&#120113;',
})
encoder.removeRule('≈')

console.log(encoder.rulesCount()) // outputs 20
```

<br>

### rulesCount(): number

_Gets the number of rules for entity encoding._

```javascript
const Encoder = require('encode-entities')

const encoder = new Encoder()

encoder.addRules({
  '𝕋': '&#120139;',
  '≈': '&#8776;',
  '𝔱': '&#120113;',
})

console.log(encoder.rulesCount()) // outputs 21
```

<br>

### encode()

_Encodes special characters in the given string to HTML entities._

```javascript
const Encoder = require('encode-entities')

const encoder = new Encoder()

console.log(encoder.encode('<strong>')) // outputs '&#60;strong&#62;'
```

<br>

## Test

```javascript
npm test
```

<br>

## Benchmark

```javascript
npm run benchmark
```
